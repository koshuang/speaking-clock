# AI 輔助開發指南

本文件記錄如何有效地與 AI 助手（如 Claude Code）協作開發，提升工程效率。

## 核心原則

### 1. AI 是協作夥伴，不是搜尋引擎

| 傳統做法 | AI 協作做法 |
|----------|-------------|
| Google 搜尋 → 複製貼上 → 手動修改 | 描述需求 → AI 產出 → 審核調整 |
| 逐行寫程式碼 | 描述意圖，讓 AI 產出初版 |
| 手動設定基礎設施 | 請 AI 產出 IaC scripts |

### 2. 信任但驗證

- **信任**：讓 AI 自由發揮，不要過度指導細節
- **驗證**：執行前檢視變更，確認符合預期
- **迭代**：發現問題直接指出，讓 AI 修正

---

## 互動技巧

### 從問題開始，而非解法

```
❌ "幫我寫一個 GitHub Actions workflow"
✅ "我想讓 Renovate 每天自動 merge，需要怎麼設定？"
```

讓 AI 理解你的目標，它會提供完整方案（可能包含你沒想到的部分）。

### 使用簡短指令

AI 理解上下文，不需要重複說明：

```
✅ "commit"
✅ "好，請加說明"
✅ "也幫我補上文件"
✅ "執行"
```

### 提供視覺化輸入

截圖比文字描述更精確：

```
✅ [貼上 UI 截圖] "avatar 可以改成圓角嗎"
✅ [貼上錯誤訊息截圖] "這個錯誤怎麼修"
```

### 追問而非重新開始

```
✅ "剛才那個 script，可以加上 dry-run 模式嗎？"
✅ "環境變數的部分，也支援 GH_TOKEN 別名"
```

AI 會記住對話脈絡，追問比重新描述更有效率。

---

## 高效工作流程

### 流程一：探索性開發

```
1. 提出問題 → "有辦法讓 X 做到 Y 嗎？"
2. AI 分析方案 → 提供選項和建議
3. 選擇方向 → "用方法一"
4. AI 實作 → 產出程式碼
5. 審核調整 → "這邊改成..."
6. 完成 → "commit"
```

### 流程二：明確需求開發

```
1. 描述需求 → "新增一個 API endpoint，功能是..."
2. AI 實作 → 產出完整程式碼
3. 測試 → AI 協助跑測試
4. 文件 → "幫我更新 README"
5. 完成 → "commit"
```

### 流程三：問題排查

```
1. 貼上錯誤 → [截圖或錯誤訊息]
2. AI 分析 → 找出根因
3. AI 修復 → 產出修正
4. 驗證 → "跑測試確認"
```

---

## 知識管理

### 讓 AI 記住專案知識

在專案中建立 `.claude/CLAUDE.md`，AI 每次都會讀取：

```markdown
# 專案開發指引

## 環境變數
- GH_TOKEN: GitHub API 用

## 程式碼風格
- 使用 TypeScript strict mode
- 元件用 PascalCase

## 常用指令
- npm run setup:all - 初始化環境
```

### 請 AI 補充文件

當 AI 幫你解決問題後，請它把知識文件化：

```
✅ "把剛才的設定寫成文件"
✅ "把 .envrc 的用法加到 CLAUDE.md"
✅ "這個原則很重要，加到開發指引"
```

### 使用 `/done` 觸發文件維護

完成任務後執行 `/done`，AI 會：
1. 分析變更類型
2. 判斷需要更新哪些文件
3. 自動更新 README、PRD 等

---

## 最佳實踐

### DO ✅

| 做法 | 範例 |
|------|------|
| 描述目標而非步驟 | "讓 CI 在 PR 時跑測試" |
| 提供上下文 | "我們用 Vite + React" |
| 直接指出問題 | "這會有安全風險" |
| 請求文件化 | "寫成 script 讓以後能重複執行" |
| 要求解釋 | "為什麼選擇這個方案？" |

### DON'T ❌

| 做法 | 問題 |
|------|------|
| 過度詳細指導 | 限制 AI 發揮空間 |
| 一次問太多不相關問題 | 容易混淆 |
| 不看 AI 的輸出就執行 | 可能有錯誤 |
| 忽略 AI 的建議 | AI 可能看到你沒注意的問題 |

---

## 常用互動模式

### 快速指令

| 指令 | 用途 |
|------|------|
| `commit` | 提交變更 |
| `push` | 推送到遠端 |
| `/done` | 任務完成，觸發文件維護 |
| `執行` | 執行剛才討論的方案 |

### 追問模式

```
"也幫我..."        → 追加相關工作
"另外..."          → 補充需求
"等等，這邊..."    → 修正方向
"還有一個問題..."  → 連續提問
```

### 確認模式

```
"這樣對嗎？"       → 請 AI 驗證你的理解
"有沒有更好的做法？" → 請 AI 提供替代方案
"這會有什麼風險？"  → 請 AI 分析潛在問題
```

---

## Infrastructure as Code

請 AI 產出 scripts 而非手動步驟：

```
❌ "告訴我怎麼設定 GitHub branch protection"
✅ "寫一個 script 設定 GitHub branch protection，要能重複執行"
```

**好處：**
- 可重複執行（onboarding 新人）
- 可版本控制（追蹤變更）
- 可整合 CI/CD
- 減少人為錯誤

---

## 範例對話

### 範例一：從問題到實作

```
👤: 我 GitHub 有裝 Renovate，有辦法讓他每天自動 merge 並跑測試嗎？

🤖: [分析現有設定，提供完整方案]
    1. 修改 renovate.json schedule
    2. 新增 CI workflow
    3. 設定 branch protection

👤: 幫我修改

🤖: [執行修改]

👤: 也幫我加 script 讓設定可以自動化

🤖: [建立 IaC scripts]

👤: commit

🤖: [提交變更]
```

### 範例二：視覺化問題

```
👤: [貼上 UI 截圖] avatar 可以改成圓角嗎

🤖: [找到相關程式碼，分析問題，修復]

👤: commit

🤖: [提交變更]
```

---

## 總結

1. **描述目標**而非步驟，讓 AI 提供完整方案
2. **善用上下文**，簡短指令即可
3. **視覺化輸入**，截圖比文字精確
4. **知識文件化**，讓 AI 幫你維護文件
5. **IaC 優先**，scripts 比手動步驟好
6. **信任但驗證**，讓 AI 發揮但要審核

AI 是你的 pair programming 夥伴，善用它可以大幅提升開發效率。
