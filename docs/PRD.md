# 語音報時器 - 產品需求文件 (PRD)

## 1. 產品概述

### 1.1 產品名稱
語音報時器 (Speaking Clock)

### 1.2 產品定位
一款可安裝的網頁應用程式（PWA），提供定時語音報時功能，幫助用戶在專注工作或日常生活中掌握時間。

### 1.3 目標用戶
- 需要定時提醒時間的工作者
- 視力不便需要語音報時的用戶
- 希望減少看手機頻率的用戶
- 需要時間管理輔助的學生或專業人士

## 2. 功能需求

### 2.1 核心功能

#### 2.1.1 時間顯示
| 需求 | 描述 | 優先級 |
|------|------|--------|
| 即時時鐘 | 顯示當前日期與時間，每秒更新 | P0 |
| 日期格式 | 顯示年、月、日、星期（繁體中文） | P0 |
| 時間格式 | 24 小時制顯示 | P0 |

#### 2.1.2 語音報時
| 需求 | 描述 | 優先級 |
|------|------|--------|
| 定時報時 | 根據設定的間隔自動播報時間 | P0 |
| 時段區分 | 凌晨(00-05)、上午(06-11)、下午(12-17)、晚上(18-23) | P0 |
| 12 小時制播報 | 語音使用 12 小時制（如「下午 3 點」） | P0 |
| 整點特殊處理 | 整點播報「X 點整」，非整點播報「X 點 Y 分」 | P1 |
| 立即報時 | 提供按鈕可立即觸發報時 | P1 |

#### 2.1.3 報時設定
| 需求 | 描述 | 優先級 |
|------|------|--------|
| 啟用/停用 | 可開關報時功能 | P0 |
| 間隔設定 | 支援 1、5、10、15、30、60 分鐘間隔 | P0 |
| 語音選擇 | 可選擇系統可用的語音 | P1 |
| 預設語音 | 優先使用台灣繁體中文 (zh-TW) 語音 | P1 |
| 設定記憶 | 使用 localStorage 保存用戶設定 | P0 |

#### 2.1.4 螢幕常亮
| 需求 | 描述 | 優先級 |
|------|------|--------|
| Wake Lock | 支援 Screen Wake Lock API 防止螢幕關閉 | P1 |
| 開關控制 | 用戶可自行開啟或關閉螢幕常亮 | P1 |
| 自動恢復 | 頁面重新可見時自動恢復 Wake Lock | P2 |

### 2.2 PWA 功能

| 需求 | 描述 | 優先級 |
|------|------|--------|
| 可安裝 | 支援安裝到桌面或手機主畫面 | P0 |
| 離線支援 | 安裝後可離線使用 | P1 |
| Service Worker | 使用 Workbox 管理快取策略 | P1 |

## 3. 技術規格

### 3.1 技術架構

採用 Clean Architecture 分層架構：

```
src/
├── domain/           # 核心業務邏輯（無外部依賴）
│   ├── entities/     # 資料模型
│   ├── usecases/     # 應用邏輯
│   └── ports/        # 介面定義
├── infrastructure/   # 外部依賴實作
├── presentation/     # UI 層
└── di/               # 依賴注入
```

### 3.2 技術選型

| 類別 | 技術 | 說明 |
|------|------|------|
| 框架 | React 19 | UI 框架 |
| 建置工具 | Vite 7 | 快速開發與建置 |
| 語言 | TypeScript | 型別安全 |
| PWA | vite-plugin-pwa | Service Worker 與 Manifest |
| 測試 | Vitest | 單元測試 |
| 部署 | GitHub Pages | 靜態網站託管 |

### 3.3 瀏覽器 API

| API | 用途 | 支援度 |
|-----|------|--------|
| Web Speech API | 語音合成 | 現代瀏覽器皆支援 |
| Screen Wake Lock API | 防止螢幕關閉 | Chrome, Edge, Safari |
| localStorage | 儲存設定 | 所有瀏覽器 |

## 4. 使用者介面

### 4.1 頁面結構

```
┌─────────────────────────────┐
│         語音報時器           │  Header
├─────────────────────────────┤
│      2024年1月1日 星期一      │
│          10:30:45           │  時鐘顯示區
├─────────────────────────────┤
│  報時狀態    [已啟用/已停用]   │
│  螢幕常亮    [已開啟/已關閉]   │
│  報時間隔    [1][5][10]...   │  控制區
│  語音選擇    [下拉選單]       │
│       [立即報時]             │
├─────────────────────────────┤
│     每 30 分鐘報時一次        │  Footer
└─────────────────────────────┘
```

### 4.2 互動流程

1. 用戶開啟應用，顯示當前時間
2. 用戶點擊「已停用」按鈕啟用報時
3. 用戶選擇報時間隔（預設 30 分鐘）
4. 系統在指定間隔自動播報時間
5. 用戶可隨時點擊「立即報時」測試

## 5. 非功能需求

### 5.1 效能
- 首次載入時間 < 3 秒
- 時鐘更新不造成明顯卡頓

### 5.2 可用性
- 響應式設計，支援手機與桌面
- 按鈕足夠大，方便觸控操作

### 5.3 可靠性
- 設定自動保存，重新開啟不遺失
- 語音 API 不支援時顯示提示

## 6. 未來規劃

| 功能 | 描述 | 優先級 |
|------|------|--------|
| 自訂報時文字 | 允許用戶自訂報時模板 | P2 |
| 音效提示 | 報時前播放提示音 | P2 |
| 多語言支援 | 支援英文等其他語言介面 | P3 |
| 排程報時 | 設定特定時段才報時 | P3 |
